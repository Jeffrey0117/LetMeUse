"use strict";(()=>{(function(){let l=document.currentScript;function b(){let t=l?.getAttribute("data-base-url");if(t)return t.replace(/\/+$/,"");let e=l?.getAttribute("src")??"";try{return new URL(e,window.location.href).origin}catch{return""}}let p=b();document.querySelectorAll("[data-adman-id]").forEach(async t=>{let e=t.getAttribute("data-adman-id");if(e)try{let r=await fetch(`${p}/api/serve/${e}`);if(!r.ok)return;let n=await r.json();f(t,n)}catch{}});function o(t){let e=document.createElement("div");return e.textContent=t,e.innerHTML}function u(t){return t.startsWith("http")?t:`${p}${t}`}function h(t){return t?{backgroundImage:`url(${t.startsWith("http")?t:`${p}${t}`})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}}function a(t,e){return{backgroundColor:String(t.backgroundColor),color:String(t.textColor),borderRadius:String(t.borderRadius),padding:String(t.padding),maxWidth:String(t.maxWidth),fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif',boxSizing:"border-box",...h(e)}}function c(t){let e=t.style;return`<a href="${o(t.ctaUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:${e.ctaBackgroundColor};color:${e.ctaTextColor};padding:8px 20px;border-radius:6px;text-decoration:none;font-size:14px;font-weight:500;white-space:nowrap">${o(t.ctaText)}</a>`}function x(t){return`<button onclick="this.closest('[data-adman-wrapper]').remove()" style="background:none;border:none;cursor:pointer;font-size:18px;line-height:1;opacity:0.7;padding:4px 8px;color:${t}">\u2715</button>`}function g(t,e,r=""){let n=t.imageUrl;return n?`<img src="${o(u(n))}" alt="" style="max-width:100%;border-radius:4px;margin-bottom:8px;object-fit:cover;max-height:${e};${r}" />`:""}function f(t,e){switch(e.type){case"bottom-banner":return y(t,e);case"top-notification":return w(e);case"in-article-banner":return m(t,e);case"modal-popup":return k(e);case"sidebar-card":return v(t,e);default:return m(t,e)}}function y(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...a(r,e.backgroundImageUrl),position:"fixed",bottom:"0",left:"0",right:"0",zIndex:String(r.zIndex),display:"flex",alignItems:"center",gap:"16px",boxShadow:"0 -2px 8px rgba(0,0,0,0.15)"});let i="",s=e.imageUrl;s&&(i+=`<img src="${o(u(s))}" alt="" style="width:80px;height:60px;object-fit:cover;border-radius:4px;flex-shrink:0" />`),i+='<div style="flex:1;min-width:0">',i+=`<h3 style="margin:0 0 4px;font-size:16px;font-weight:600">${o(e.headline)}</h3>`;let d=e.bodyText;d&&(i+=`<p style="margin:0;font-size:13px;opacity:0.85;line-height:1.4">${o(d)}</p>`),i+="</div>",i+=c(e),n.innerHTML=i,document.body.appendChild(n)}function w(t){let e=t.style,r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{...a(e,t.backgroundImageUrl),position:"fixed",top:"0",left:"0",right:"0",zIndex:String(e.zIndex),display:"flex",alignItems:"center",gap:"12px",padding:"10px 16px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"});let n=`<span style="flex:1;font-size:14px;font-weight:500">${o(t.headline)}</span>`;n+=c(t).replace("padding:8px 20px","padding:6px 16px").replace("font-size:14px","font-size:13px"),n+=x(String(e.textColor)),r.innerHTML=n,document.body.appendChild(r)}function m(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...a(r,e.backgroundImageUrl),boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let i=g(e,"200px","width:100%");i+=`<h3 style="margin:0 0 6px;font-size:18px;font-weight:600">${o(e.headline)}</h3>`;let s=e.bodyText;s&&(i+=`<p style="margin:0 0 12px;font-size:14px;opacity:0.85;line-height:1.5">${o(s)}</p>`),i+=c(e),n.innerHTML=i,t.appendChild(n)}function k(t){let e=t.style,r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:String(e.zIndex)});let n=document.createElement("div");Object.assign(n.style,{...a(e,t.backgroundImageUrl),maxWidth:"400px",width:"90%",position:"relative",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"});let i=`<div style="position:absolute;top:8px;right:8px">${x(String(e.textColor))}</div>`;i+=g(t,"180px","width:100%"),i+=`<h3 style="margin:0 0 8px;font-size:20px;font-weight:600">${o(t.headline)}</h3>`;let s=t.bodyText;s&&(i+=`<p style="margin:0 0 16px;font-size:14px;opacity:0.85;line-height:1.5">${o(s)}</p>`),i+=c(t).replace("display:inline-block","display:block;text-align:center;width:100%"),n.innerHTML=i,r.appendChild(n),r.addEventListener("click",d=>{d.target===r&&r.remove()}),document.body.appendChild(r)}function v(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...a(r,e.backgroundImageUrl),maxWidth:"280px",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let i=g(e,"160px","width:100%");i+=`<h3 style="margin:0 0 6px;font-size:16px;font-weight:600">${o(e.headline)}</h3>`;let s=e.bodyText;s&&(i+=`<p style="margin:0 0 12px;font-size:13px;opacity:0.85;line-height:1.4">${o(s)}</p>`),i+=c(e).replace("display:inline-block","display:block;text-align:center;width:100%;font-size:13px"),n.innerHTML=i,t.appendChild(n)}})();})();
