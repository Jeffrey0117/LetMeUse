"use strict";(()=>{(function(){let x=document.currentScript;function y(){let e=x?.getAttribute("data-base-url");if(e)return e.replace(/\/+$/,"");let t=x?.getAttribute("src")??"";try{return new URL(t,window.location.href).origin}catch{return""}}let p=y();document.querySelectorAll("[data-adman-id]").forEach(async e=>{let t=e.getAttribute("data-adman-id");if(t)try{let o=await fetch(`${p}/api/serve/${t}`);if(!o.ok)return;let i=await o.json(),r=w(e),n={...i.style,...r},a={...i,style:n};S(e,a)}catch{}});function w(e){let t={backgroundColor:e.getAttribute("data-bg-color")??void 0,textColor:e.getAttribute("data-text-color")??void 0,fontSize:e.getAttribute("data-font-size")??void 0,ctaBackgroundColor:e.getAttribute("data-cta-bg-color")??void 0,ctaTextColor:e.getAttribute("data-cta-text-color")??void 0,borderRadius:e.getAttribute("data-border-radius")??void 0,padding:e.getAttribute("data-padding")??void 0,maxWidth:e.getAttribute("data-max-width")??void 0,textAlign:e.getAttribute("data-text-align")??void 0};return Object.fromEntries(Object.entries(t).filter(([,o])=>o!==void 0))}function s(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function b(e){return e.startsWith("http")?e:`${p}${e}`}function k(e){return e?{backgroundImage:`url(${e.startsWith("http")?e:`${p}${e}`})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}}function l(e,t){let o={backgroundColor:String(e.backgroundColor),color:String(e.textColor),borderRadius:String(e.borderRadius),padding:String(e.padding),maxWidth:String(e.maxWidth),fontSize:e.fontSize?String(e.fontSize):"16px",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif',boxSizing:"border-box",...k(t)};return e.textAlign&&(o.textAlign=String(e.textAlign)),o}function d(e){let t=e.style;return`<a href="${s(e.ctaUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:${t.ctaBackgroundColor};color:${t.ctaTextColor};padding:8px 20px;border-radius:6px;text-decoration:none;font-size:0.875em;font-weight:500;white-space:nowrap">${s(e.ctaText)}</a>`}function u(e){return`<button onclick="this.closest('[data-adman-wrapper]').remove()" style="background:none;border:none;cursor:pointer;font-size:1.125em;line-height:1;opacity:0.7;padding:4px 8px;color:${e}">&#10005;</button>`}function m(e,t,o=""){let i=e.imageUrl;return i?`<img src="${s(b(i))}" alt="" style="max-width:100%;border-radius:4px;margin-bottom:8px;object-fit:cover;max-height:${t};${o}" />`:""}function g(){return window.innerWidth<640}function S(e,t){switch(t.type){case"bottom-banner":return v(e,t);case"top-notification":return T(e,t);case"in-article-banner":return f(e,t);case"modal-popup":return $(e,t);case"sidebar-card":return z(e,t);default:return f(e,t)}}function v(e,t){let o=t.style,i=g(),r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{...l(o,t.backgroundImageUrl),position:"fixed",bottom:"0",left:"0",right:"0",zIndex:String(o.zIndex),display:"flex",flexDirection:i?"column":"row",alignItems:i?"stretch":"center",gap:i?"12px":"16px",boxShadow:"0 -2px 8px rgba(0,0,0,0.15)"});let n="",a=t.imageUrl;a&&!i&&(n+=`<img src="${s(b(a))}" alt="" style="width:80px;height:60px;object-fit:cover;border-radius:4px;flex-shrink:0" />`),n+='<div style="flex:1;min-width:0">',n+=`<h3 style="margin:0 0 4px;font-size:1em;font-weight:600">${s(t.headline)}</h3>`;let c=t.bodyText;c&&(n+=`<p style="margin:0;font-size:0.8125em;opacity:0.85;line-height:1.4">${s(c)}</p>`),n+="</div>",i?n+=d(t).replace("display:inline-block","display:block;text-align:center;width:100%"):n+=d(t),r.innerHTML=n,document.body.appendChild(r)}function T(e,t){let o=t.style,i=g(),r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{...l(o,t.backgroundImageUrl),position:"fixed",top:"0",left:"0",right:"0",zIndex:String(o.zIndex),display:"flex",flexDirection:i?"column":"row",alignItems:i?"stretch":"center",gap:i?"8px":"12px",padding:i?"12px 16px":"10px 16px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"});let n="";i?(n+='<div style="display:flex;align-items:center;gap:8px">',n+=`<span style="flex:1;font-size:0.875em;font-weight:500">${s(t.headline)}</span>`,n+=u(String(o.textColor)),n+="</div>",n+=d(t).replace("display:inline-block","display:block;text-align:center;width:100%").replace("padding:8px 20px","padding:8px 16px")):(n+=`<span style="flex:1;font-size:0.875em;font-weight:500">${s(t.headline)}</span>`,n+=d(t).replace("padding:8px 20px","padding:6px 16px").replace("font-size:0.875em","font-size:0.8125em"),n+=u(String(o.textColor))),r.innerHTML=n,document.body.appendChild(r)}function f(e,t){let o=t.style,i=g(),r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{...l(o,t.backgroundImageUrl),boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let n=m(t,i?"150px":"200px","width:100%");n+=`<h3 style="margin:0 0 6px;font-size:1.125em;font-weight:600">${s(t.headline)}</h3>`;let a=t.bodyText;a&&(n+=`<p style="margin:0 0 12px;font-size:0.875em;opacity:0.85;line-height:1.5">${s(a)}</p>`),i?n+=d(t).replace("display:inline-block","display:block;text-align:center;width:100%"):n+=d(t),r.innerHTML=n,e.appendChild(r)}function $(e,t){let o=t.style,i=g(),r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:String(o.zIndex),padding:i?"16px":"0"});let n=document.createElement("div"),a=l(o,t.backgroundImageUrl);i&&(a.padding="16px"),Object.assign(n.style,{...a,maxWidth:"400px",width:i?"100%":"90%",position:"relative",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"});let c=`<div style="position:absolute;top:8px;right:8px">${u(String(o.textColor))}</div>`;c+=m(t,i?"140px":"180px","width:100%"),c+=`<h3 style="margin:0 0 8px;font-size:${i?"1.125em":"1.25em"};font-weight:600">${s(t.headline)}</h3>`;let h=t.bodyText;h&&(c+=`<p style="margin:0 0 16px;font-size:0.875em;opacity:0.85;line-height:1.5">${s(h)}</p>`),c+=d(t).replace("display:inline-block","display:block;text-align:center;width:100%"),n.innerHTML=c,r.appendChild(n),r.addEventListener("click",R=>{R.target===r&&r.remove()}),document.body.appendChild(r)}function z(e,t){let o=t.style,i=g(),r=document.createElement("div");r.setAttribute("data-adman-wrapper",""),Object.assign(r.style,{...l(o,t.backgroundImageUrl),maxWidth:i?"100%":"280px",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let n=m(t,i?"120px":"160px","width:100%");n+=`<h3 style="margin:0 0 6px;font-size:1em;font-weight:600">${s(t.headline)}</h3>`;let a=t.bodyText;a&&(n+=`<p style="margin:0 0 12px;font-size:0.8125em;opacity:0.85;line-height:1.4">${s(a)}</p>`),n+=d(t).replace("display:inline-block","display:block;text-align:center;width:100%;font-size:0.8125em"),r.innerHTML=n,e.appendChild(r)}})();})();
