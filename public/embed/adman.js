"use strict";(()=>{(function(){let u=document.currentScript;function f(){let t=u?.getAttribute("data-base-url");if(t)return t.replace(/\/+$/,"");let e=u?.getAttribute("src")??"";try{return new URL(e,window.location.href).origin}catch{return""}}let l=f();document.querySelectorAll("[data-adman-id]").forEach(async t=>{let e=t.getAttribute("data-adman-id");if(e)try{let r=await fetch(`${l}/api/serve/${e}`);if(!r.ok)return;let n=await r.json(),i=h(t),o={...n.style,...i},a={...n,style:o};k(t,a)}catch{}});function h(t){let e={backgroundColor:t.getAttribute("data-bg-color")??void 0,textColor:t.getAttribute("data-text-color")??void 0,fontSize:t.getAttribute("data-font-size")??void 0,ctaBackgroundColor:t.getAttribute("data-cta-bg-color")??void 0,ctaTextColor:t.getAttribute("data-cta-text-color")??void 0,borderRadius:t.getAttribute("data-border-radius")??void 0,padding:t.getAttribute("data-padding")??void 0,maxWidth:t.getAttribute("data-max-width")??void 0,textAlign:t.getAttribute("data-text-align")??void 0};return Object.fromEntries(Object.entries(e).filter(([,r])=>r!==void 0))}function s(t){let e=document.createElement("div");return e.textContent=t,e.innerHTML}function m(t){return t.startsWith("http")?t:`${l}${t}`}function y(t){return t?{backgroundImage:`url(${t.startsWith("http")?t:`${l}${t}`})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}}function c(t,e){let r={backgroundColor:String(t.backgroundColor),color:String(t.textColor),borderRadius:String(t.borderRadius),padding:String(t.padding),maxWidth:String(t.maxWidth),fontSize:t.fontSize?String(t.fontSize):"16px",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif',boxSizing:"border-box",...y(e)};return t.textAlign&&(r.textAlign=String(t.textAlign)),r}function d(t){let e=t.style;return`<a href="${s(t.ctaUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:${e.ctaBackgroundColor};color:${e.ctaTextColor};padding:8px 20px;border-radius:6px;text-decoration:none;font-size:0.875em;font-weight:500;white-space:nowrap">${s(t.ctaText)}</a>`}function b(t){return`<button onclick="this.closest('[data-adman-wrapper]').remove()" style="background:none;border:none;cursor:pointer;font-size:1.125em;line-height:1;opacity:0.7;padding:4px 8px;color:${t}">&#10005;</button>`}function p(t,e,r=""){let n=t.imageUrl;return n?`<img src="${s(m(n))}" alt="" style="max-width:100%;border-radius:4px;margin-bottom:8px;object-fit:cover;max-height:${e};${r}" />`:""}function w(){return window.innerWidth<640}function k(t,e){switch(e.type){case"bottom-banner":return S(t,e);case"top-notification":return v(t,e);case"in-article-banner":return x(t,e);case"modal-popup":return T(t,e);case"sidebar-card":return R(t,e);default:return x(t,e)}}function S(t,e){let r=e.style,n=w(),i=document.createElement("div");i.setAttribute("data-adman-wrapper",""),Object.assign(i.style,{...c(r,e.backgroundImageUrl),position:"fixed",bottom:"0",left:"0",right:"0",zIndex:String(r.zIndex),display:"flex",flexDirection:n?"column":"row",alignItems:n?"stretch":"center",gap:n?"12px":"16px",boxShadow:"0 -2px 8px rgba(0,0,0,0.15)"});let o="",a=e.imageUrl;a&&!n&&(o+=`<img src="${s(m(a))}" alt="" style="width:80px;height:60px;object-fit:cover;border-radius:4px;flex-shrink:0" />`),o+='<div style="flex:1;min-width:0">',o+=`<h3 style="margin:0 0 4px;font-size:1em;font-weight:600">${s(e.headline)}</h3>`;let g=e.bodyText;g&&(o+=`<p style="margin:0;font-size:0.8125em;opacity:0.85;line-height:1.4">${s(g)}</p>`),o+="</div>",n?o+=d(e).replace("display:inline-block","display:block;text-align:center;width:100%"):o+=d(e),i.innerHTML=o,document.body.appendChild(i)}function v(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...c(r,e.backgroundImageUrl),position:"fixed",top:"0",left:"0",right:"0",zIndex:String(r.zIndex),display:"flex",alignItems:"center",gap:"12px",padding:"10px 16px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"});let i=`<span style="flex:1;font-size:0.875em;font-weight:500">${s(e.headline)}</span>`;i+=d(e).replace("padding:8px 20px","padding:6px 16px").replace("font-size:0.875em","font-size:0.8125em"),i+=b(String(r.textColor)),n.innerHTML=i,document.body.appendChild(n)}function x(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...c(r,e.backgroundImageUrl),boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let i=p(e,"200px","width:100%");i+=`<h3 style="margin:0 0 6px;font-size:1.125em;font-weight:600">${s(e.headline)}</h3>`;let o=e.bodyText;o&&(i+=`<p style="margin:0 0 12px;font-size:0.875em;opacity:0.85;line-height:1.5">${s(o)}</p>`),i+=d(e),n.innerHTML=i,t.appendChild(n)}function T(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:String(r.zIndex)});let i=document.createElement("div");Object.assign(i.style,{...c(r,e.backgroundImageUrl),maxWidth:"400px",width:"90%",position:"relative",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"});let o=`<div style="position:absolute;top:8px;right:8px">${b(String(r.textColor))}</div>`;o+=p(e,"180px","width:100%"),o+=`<h3 style="margin:0 0 8px;font-size:1.25em;font-weight:600">${s(e.headline)}</h3>`;let a=e.bodyText;a&&(o+=`<p style="margin:0 0 16px;font-size:0.875em;opacity:0.85;line-height:1.5">${s(a)}</p>`),o+=d(e).replace("display:inline-block","display:block;text-align:center;width:100%"),i.innerHTML=o,n.appendChild(i),n.addEventListener("click",g=>{g.target===n&&n.remove()}),document.body.appendChild(n)}function R(t,e){let r=e.style,n=document.createElement("div");n.setAttribute("data-adman-wrapper",""),Object.assign(n.style,{...c(r,e.backgroundImageUrl),maxWidth:"280px",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"});let i=p(e,"160px","width:100%");i+=`<h3 style="margin:0 0 6px;font-size:1em;font-weight:600">${s(e.headline)}</h3>`;let o=e.bodyText;o&&(i+=`<p style="margin:0 0 12px;font-size:0.8125em;opacity:0.85;line-height:1.4">${s(o)}</p>`),i+=d(e).replace("display:inline-block","display:block;text-align:center;width:100%;font-size:0.8125em"),n.innerHTML=i,t.appendChild(n)}})();})();
